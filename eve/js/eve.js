window.AudioContext=window.AudioContext||window.webkitAudioContext;var EVE={synth:new AudioContext,config:{harmonics:8,master_freq:440,octave_shift:0},program:{name:"INITIALIZE",osc1:1,osc2:0,osc3:0,osc4:0,osc5:0,osc6:0,osc7:0,osc8:0,vca_a:.1,vca_d:.4,vca_s:.65,vca_r:.4,vca_g:0},buildButton:document.getElementById("build-button"),now:function(){"use strict";return EVE.synth.currentTime},attack:function(t){"use strict";return EVE.synth.currentTime+t},decay:function(){"use strict"},sustain:function(){"use strict"},release:function(){"use strict"}};EVE.buildSynth=function(){"use strict";function t(t){var n,e,a,E;for(n=0;t>n;n+=1)e=n+1,a="osc"+e,E=a+"_vca",EVE[E]=EVE.synth.createGain(),EVE[E].gain.setValueAtTime(1,EVE.now()),EVE[E].connect(EVE.vca),EVE[a]=EVE.synth.createOscillator(),EVE[a].type="sine",EVE[a].frequency.value=EVE.config.master_freq*e,EVE[a].connect(EVE[E]),EVE.harmonicOscs.push(EVE[a]),EVE.harmonicVcas.push(EVE[E])}return EVE.harmonicOscs=[],EVE.harmonicVcas=[],EVE.vca=EVE.synth.createGain(),EVE.vca.gain.setValueAtTime(0,EVE.now()),EVE.vca.connect(EVE.synth.destination),t(EVE.config.harmonics),EVE.buildSynth=function(){return console.warn("Synth already built"),!0},!0},EVE.startSynth=function(){"use strict";var t;for(console.log("Start synth called"),t=0;t<EVE.config.harmonics;t+=1)EVE.harmonicOscs[t].start(0);return EVE.startSynth=function(){return console.warn("startSynth already called"),!0},!0},EVE.gateOn=function(t){"use strict";t.target.dataset.noteValue&&(console.log(t.target.dataset.noteValue),EVE.vca.gain.linearRampToValueAtTime(1,EVE.attack(EVE.program.vca_a)))},EVE.gateOff=function(t){"use strict";t.target.dataset.noteValue&&(console.log("gateOff",t.target.dataset.noteValue),EVE.vca.gain.setTargetAtTime(0,EVE.now(),.1))},EVE.calculatePitch=function(){"use strict";console.log("calculatePitch called")},function(){"use strict";EVE.buildSynth(),EVE.startSynth(),EVE.keyboard=document.getElementById("keyboard"),EVE.keyboard.addEventListener("mousedown",EVE.gateOn),EVE.keyboard.addEventListener("mouseup",EVE.gateOff)}();